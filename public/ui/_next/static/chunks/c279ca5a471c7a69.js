(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65476,e=>{"use strict";let t=(0,e.i(75254).default)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);e.s(["RefreshCcwIcon",()=>t],65476)},78078,e=>{"use strict";let t=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["EyeIcon",()=>t],78078)},36356,58857,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["ArrowUpIcon",()=>a],36356);let s=(0,t.default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["ArrowDownIcon",()=>s],58857)},70065,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card/80 backdrop-blur-sm text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm transition-all duration-300 hover:shadow-[0_0_30px_rgba(32,178,170,0.12)] hover:-translate-y-0.5",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("flex flex-col gap-1.5 px-6",e),...s})}function o({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}function c({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>l,"CardDescription",()=>n,"CardFooter",()=>c,"CardHeader",()=>r,"CardTitle",()=>o])},70152,e=>{"use strict";function t(e,[t,a]){return Math.min(a,Math.max(t,e))}e.s(["clamp",()=>t])},24375,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["ArrowUpDownIcon",()=>t],24375)},47627,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...s})})}function r({className:e,...s}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...s})}function o({className:e,...s}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...s})}function n({className:e,...s}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s})}function l({className:e,...s}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("h-10 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&_[role=checkbox]]:translate-y-[2px]",e),...s})}function c({className:e,...s}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0 [&_[role=checkbox]]:translate-y-[2px]",e),...s})}function i({className:e,...s}){return(0,t.jsx)("caption",{"data-slot":"table-caption",className:(0,a.cn)("mt-4 text-sm text-muted-foreground",e),...s})}e.s(["Table",()=>s,"TableBody",()=>o,"TableCaption",()=>i,"TableCell",()=>c,"TableHead",()=>l,"TableHeader",()=>r,"TableRow",()=>n])},29383,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(47627),r=e.i(36356),o=e.i(58857),n=e.i(24375),l=e.i(47163);function c({children:e,field:c,currentSort:i,onSort:d,className:u}){let p=i.field===c,m=a.useMemo(()=>u?u.includes("text-center")?"justify-center":u.includes("text-right")?"justify-end":"justify-start":"justify-start",[u]);return(0,t.jsx)(s.TableHead,{className:(0,l.cn)("cursor-pointer select-none hover:bg-muted/50 transition-colors",u),onClick:()=>d(c),children:(0,t.jsxs)("div",{className:(0,l.cn)("flex items-center gap-1",m),children:[e,p?"asc"===i.direction?(0,t.jsx)(r.ArrowUpIcon,{className:"size-3.5 text-foreground"}):(0,t.jsx)(o.ArrowDownIcon,{className:"size-3.5 text-foreground"}):(0,t.jsx)(n.ArrowUpDownIcon,{className:"size-3.5 text-muted-foreground/50"})]})})}e.s(["SortableTableHead",()=>c])},30374,e=>{"use strict";var t=e.i(43476),a=e.i(26999),s=e.i(95926),r=e.i(47163);function o({...e}){return(0,t.jsx)(a.Root,{"data-slot":"dialog",...e})}function n({...e}){return(0,t.jsx)(a.Trigger,{"data-slot":"dialog-trigger",...e})}function l({...e}){return(0,t.jsx)(a.Portal,{"data-slot":"dialog-portal",...e})}function c({className:e,...s}){return(0,t.jsx)(a.Overlay,{"data-slot":"dialog-overlay",className:(0,r.cn)("fixed inset-0 z-50 bg-black/40 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s})}function i({className:e,children:o,...n}){return(0,t.jsxs)(l,{children:[(0,t.jsx)(c,{}),(0,t.jsxs)(a.Content,{"data-slot":"dialog-content",className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background/95 backdrop-blur-md p-6 shadow-[0_0_40px_rgba(32,178,170,0.1)] duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 sm:max-w-lg sm:rounded-xl",e),...n,children:[o,(0,t.jsxs)(a.Close,{className:"absolute right-4 top-4 rounded-xs opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(s.XIcon,{className:"size-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function d({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function u({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function p({className:e,...s}){return(0,t.jsx)(a.Title,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg font-semibold leading-none",e),...s})}function m({className:e,...s}){return(0,t.jsx)(a.Description,{"data-slot":"dialog-description",className:(0,r.cn)("text-sm text-muted-foreground",e),...s})}e.s(["Dialog",()=>o,"DialogContent",()=>i,"DialogDescription",()=>m,"DialogFooter",()=>u,"DialogHeader",()=>d,"DialogTitle",()=>p,"DialogTrigger",()=>n])},82935,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(55161),r=e.i(62280),o=e.i(72536);let n=[{id:"evt-001",topic:"webhook.received",eventId:"evt-001",name:"push",source:"github",dataType:"json",data:'{"repository":"example.com","ref":"refs/heads/main"}',workspace:"example.com",runId:"run-demo-001",workflowName:"subdomain-enum",processed:!0,createdAt:new Date(Date.now()-18e5),processedAt:new Date(Date.now()-174e4)},{id:"evt-002",topic:"tasks.started",eventId:"evt-002",name:"scan_started",source:"osmedeus",dataType:"text",data:"scan started",workspace:"example.com",runId:"run-demo-002",workflowName:"full-recon",processed:!0,createdAt:new Date(Date.now()-72e4),processedAt:new Date(Date.now()-66e4)},{id:"evt-003",topic:"tasks.failed",eventId:"evt-003",name:"scan_failed",source:"osmedeus",dataType:"text",data:"task failed",workspace:"acme.io",runId:"run-demo-003",workflowName:"vulnerability-scan",processed:!1,createdAt:new Date(Date.now()-3e5),error:"Connection timeout after 5 retries"}];async function l(e){let t=e.page??1,a=e.pageSize??20,l=(t-1)*a,c=e.filters??{};if((0,o.isDemoMode)()){let e=(c.topic??"").trim().toLowerCase(),s=(c.name??"").trim().toLowerCase(),r=(c.source??"").trim().toLowerCase(),o=(c.workspace??"").trim().toLowerCase(),i=(c.runId??"").trim().toLowerCase(),d=(c.workflowName??"").trim().toLowerCase(),u=n.filter(t=>(!e||!!t.topic.toLowerCase().includes(e))&&(!s||!!t.name.toLowerCase().includes(s))&&(!r||!!t.source.toLowerCase().includes(r))&&(!o||String(t.workspace??"").toLowerCase()===o)&&(!i||String(t.runId??"").toLowerCase()===i)&&(!d||String(t.workflowName??"").toLowerCase()===d)&&("boolean"!=typeof c.processed||t.processed===c.processed)&&!0);return{data:u.slice(l,l+a),pagination:{page:t,pageSize:a,totalItems:u.length,totalPages:Math.ceil(u.length/a)}}}let i={offset:l,limit:a};c.topic&&(i.topic=c.topic),c.name&&(i.name=c.name),c.source&&(i.source=c.source),c.workspace&&(i.workspace=c.workspace),c.runId&&(i.run_id=c.runId),c.workflowName&&(i.workflow_name=c.workflowName),"boolean"==typeof c.processed&&(i.processed=String(c.processed));let d=await s.http.get(`${r.API_PREFIX}/event-logs`,{params:i}),u=(d.data?.data||[]).map(e=>({id:String(e.id??e.event_id??`${e.topic}-${e.created_at}`),topic:e.topic??"",eventId:e.event_id??"",name:e.name??"",source:e.source??"",dataType:e.data_type,data:e.data,workspace:e.workspace,runId:e.run_id,workflowName:e.workflow_name,processed:!!e.processed,createdAt:e.created_at?new Date(e.created_at):new Date,processedAt:e.processed_at?new Date(e.processed_at):void 0,error:e.error})),p=d.data?.pagination?.total??u.length,m=d.data?.pagination?.limit??a;return{data:u,pagination:{page:Math.floor((d.data?.pagination?.offset??l)/m)+1,pageSize:m,totalItems:p,totalPages:Math.ceil(p/m)}}}var c=e.i(70065),i=e.i(67881),d=e.i(23750),u=e.i(65476),p=e.i(78078),m=e.i(30374),x=e.i(62870),h=e.i(94179),f=e.i(46696),g=e.i(29383);function w(){let[e,s]=a.useState([]),[r,o]=a.useState(!0),[n,w]=a.useState(""),[j,v]=a.useState(null),[b,N]=a.useState(!1),[y,k]=a.useState(null),[S,C]=a.useState(1),[I,D]=a.useState(20),[T,A]=a.useState(null),[_,L]=a.useState({}),[M,P]=a.useState({field:null,direction:"asc"}),z=a.useMemo(()=>{let t=n.trim().toLowerCase();return t?e.filter(e=>[e.topic,e.name,e.source,e.workspace,e.runId,e.workflowName,e.eventId,e.dataType,e.data,e.error].filter(Boolean).join("\n").toLowerCase().includes(t)):e},[e,n]),H=a.useMemo(()=>{if(!M.field)return z;let e="asc"===M.direction?1:-1,t=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),a=e=>{switch(M.field){case"topic":return e.topic??"";case"name":return e.name??"";case"source":return e.source??"";case"workspace":return e.workspace??"";case"workflow":return e.workflowName??"";case"processed":return+!!e.processed;default:return""}};return[...z].sort((s,r)=>{let o=a(s),n=a(r),l=0;return 0!==(l="number"==typeof o&&"number"==typeof n?o-n:t.compare(String(o),String(n)))?l*e:(r.createdAt?.getTime?.()??0)-(s.createdAt?.getTime?.()??0)})},[z,M.direction,M.field]),B=e=>{P(t=>t.field===e?{field:e,direction:"asc"===t.direction?"desc":"asc"}:{field:e,direction:"asc"})},E=a.useCallback(async()=>{try{o(!0);let e=await l({page:S,pageSize:I,filters:{topic:_.topic?.trim()||void 0,workspace:_.workspace?.trim()||void 0,processed:"boolean"==typeof _.processed?_.processed:void 0}});s(e.data),A(e.pagination)}catch(e){f.toast.error("Failed to load events",{description:e instanceof Error?e.message:""})}finally{o(!1)}},[S,I,_]);a.useEffect(()=>{E()},[E]);let R=async e=>{v(e),k(e),N(!0)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{children:[(0,t.jsx)(c.CardTitle,{children:"Event Logs"}),(0,t.jsx)(c.CardDescription,{children:"Filter by topic, workspace, or processed status"})]}),(0,t.jsxs)(c.CardContent,{children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 py-2",children:[(0,t.jsx)(d.Input,{placeholder:"Search",value:n,onChange:e=>w(e.target.value),className:"w-[360px] lg:w-[520px]"}),(0,t.jsx)(d.Input,{placeholder:"Topic",value:_.topic??"",onChange:e=>L(t=>({...t,topic:e.target.value})),className:"max-w-[200px]"}),(0,t.jsx)(d.Input,{placeholder:"Workspace",value:_.workspace??"",onChange:e=>L(t=>({...t,workspace:e.target.value})),className:"max-w-[200px]"}),(0,t.jsxs)(x.Select,{value:"boolean"==typeof _.processed?String(_.processed):"all",onValueChange:e=>{L(t=>({...t,processed:"all"===e?void 0:"true"===e})),C(1)},children:[(0,t.jsx)(x.SelectTrigger,{className:"max-w-[180px]",children:(0,t.jsx)(x.SelectValue,{placeholder:"Processed"})}),(0,t.jsxs)(x.SelectContent,{children:[(0,t.jsx)(x.SelectItem,{value:"all",children:"All"}),(0,t.jsx)(x.SelectItem,{value:"true",children:"Processed"}),(0,t.jsx)(x.SelectItem,{value:"false",children:"Unprocessed"})]})]}),(0,t.jsxs)(x.Select,{value:String(I),onValueChange:e=>{let t=parseInt(e,10);D(Number.isNaN(t)?20:t),C(1)},children:[(0,t.jsx)(x.SelectTrigger,{className:"max-w-[140px]",children:(0,t.jsx)(x.SelectValue,{placeholder:"Page Size"})}),(0,t.jsxs)(x.SelectContent,{children:[(0,t.jsx)(x.SelectItem,{value:"20",children:"20"}),(0,t.jsx)(x.SelectItem,{value:"50",children:"50"}),(0,t.jsx)(x.SelectItem,{value:"100",children:"100"})]})]}),(0,t.jsxs)(i.Button,{variant:"outline",onClick:()=>C(1),children:[(0,t.jsx)(u.RefreshCcwIcon,{className:"mr-2 size-4"}),"Apply"]}),(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>{L({}),w(""),C(1),D(20)},children:"Reset"})]}),r?(0,t.jsx)("div",{className:"py-10 text-center text-sm text-muted-foreground",children:"Loading..."}):0===e.length?(0,t.jsx)("div",{className:"py-10 text-center text-sm text-muted-foreground",children:"No events"}):0===z.length?(0,t.jsx)("div",{className:"py-10 text-center text-sm text-muted-foreground",children:"No matching events"}):(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)(g.SortableTableHead,{field:"topic",currentSort:M,onSort:e=>B(e),className:"py-2",children:"Topic"}),(0,t.jsx)(g.SortableTableHead,{field:"name",currentSort:M,onSort:e=>B(e),className:"py-2",children:"Name"}),(0,t.jsx)(g.SortableTableHead,{field:"source",currentSort:M,onSort:e=>B(e),className:"py-2",children:"Source"}),(0,t.jsx)(g.SortableTableHead,{field:"workspace",currentSort:M,onSort:e=>B(e),className:"py-2",children:"Workspace"}),(0,t.jsx)(g.SortableTableHead,{field:"workflow",currentSort:M,onSort:e=>B(e),className:"py-2",children:"Workflow"}),(0,t.jsx)(g.SortableTableHead,{field:"processed",currentSort:M,onSort:e=>B(e),className:"py-2",children:"Processed"}),(0,t.jsx)("th",{className:"h-10 px-4 py-2 text-left align-middle font-medium text-muted-foreground",children:"Detail"})]})}),(0,t.jsx)("tbody",{children:H.map(e=>{let a,s;return(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)(h.Badge,{variant:(a=e.topic.toLowerCase()).includes("completed")||a.includes("success")?"success":a.includes("started")||a.includes("running")?"info":a.includes("failed")||a.includes("error")?"destructive":"secondary",children:e.topic})}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.name}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)(h.Badge,{variant:"executor"===(s=(e.source||"").toLowerCase())||"api"===s?"info":"scheduler"===s?"secondary":"outline",children:e.source})}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.workspace||"-"}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.workflowName||"-"}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)(h.Badge,{variant:e.processed?"success":"warning",children:e.processed?"Processed":"Unprocessed"})}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)(i.Button,{variant:"outline",size:"icon-sm",onClick:()=>R(e),"aria-label":"View detail",children:(0,t.jsx)(p.EyeIcon,{className:"size-4"})})})]},e.id)})})]}),T&&T.totalPages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between px-2 py-3",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",(T.page-1)*T.pageSize+1," to"," ",Math.min(T.page*T.pageSize,T.totalItems)," of"," ",T.totalItems.toLocaleString()," results"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>C(e=>Math.max(1,e-1)),disabled:T.page<=1,children:"Previous"}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,T.totalPages)},(e,a)=>{let s;return s=T.totalPages<=5||T.page<=3?a+1:T.page>=T.totalPages-2?T.totalPages-4+a:T.page-2+a,(0,t.jsx)(i.Button,{variant:T.page===s?"default":"outline",size:"sm",className:"w-9",onClick:()=>C(s),children:s},s)})}),(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>C(e=>Math.min(e+1,T.totalPages)),disabled:T.page>=T.totalPages,children:"Next"})]})]})]})]})]}),(0,t.jsx)(m.Dialog,{open:b,onOpenChange:N,children:(0,t.jsxs)(m.DialogContent,{children:[(0,t.jsxs)(m.DialogHeader,{children:[(0,t.jsx)(m.DialogTitle,{children:"Event Detail"}),(0,t.jsx)(m.DialogDescription,{children:"Event log payload"})]}),j?(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{children:["Topic: ",j.topic]}),(0,t.jsxs)("div",{children:["Name: ",j.name]}),(0,t.jsxs)("div",{children:["Source: ",j.source]}),(0,t.jsxs)("div",{children:["Workspace: ",j.workspace||"-"]}),(0,t.jsxs)("div",{children:["Run ID: ",j.runId||"-"]}),(0,t.jsxs)("div",{children:["Workflow: ",j.workflowName||"-"]}),(0,t.jsxs)("div",{children:["Processed: ",j.processed?"true":"false"]}),(0,t.jsxs)("div",{children:["Created: ",y?.createdAt?y.createdAt.toLocaleString():"-"]}),(0,t.jsxs)("div",{children:["Processed At: ",y?.processedAt?y.processedAt.toLocaleString():"-"]}),y?.data?(0,t.jsxs)("div",{className:"mt-2 rounded bg-muted p-2",children:[(0,t.jsx)("div",{className:"font-medium",children:"Data"}),(0,t.jsx)("pre",{className:"whitespace-pre-wrap break-words text-xs",children:(()=>{try{let e=JSON.parse(y.data||"");return JSON.stringify(e,null,2)}catch{return y.data}})()})]}):null,y?.error?(0,t.jsxs)("div",{className:"mt-2 rounded bg-muted p-2",children:[(0,t.jsx)("div",{className:"font-medium",children:"Error"}),(0,t.jsx)("pre",{className:"whitespace-pre-wrap break-words text-xs text-destructive",children:y.error})]}):null]}):null]})})]})}e.s(["default",()=>w],82935)}]);