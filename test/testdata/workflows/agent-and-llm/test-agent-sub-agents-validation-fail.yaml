kind: module
name: test-agent-sub-agents-validation-fail
description: Agent with duplicate sub-agent names (should fail validation)
tags: test,agent,validation-fail

params:
  - name: target
    required: true
    default: example.com

steps:
  - name: bad-orchestrator
    type: agent
    query: "Analyze {{Target}}"
    max_iterations: 5
    agent_tools:
      - preset: bash
    sub_agents:
      - name: recon_agent
        description: "First recon agent"
        max_iterations: 3
        agent_tools:
          - preset: bash
      - name: recon_agent
        description: "Duplicate name - should cause validation error"
        max_iterations: 3
        agent_tools:
          - preset: bash
